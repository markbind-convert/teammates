<!DOCTYPE html>
<html>

<head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="MarkBind 2.3.0">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title></title>
  <link rel="stylesheet" href="markbind/css/bootstrap.min.css">
  <link rel="stylesheet" href="markbind/css/bootstrap-vue.min.css">
  <link rel="stylesheet" href="markbind/fontawesome/css/all.min.css">
  <link rel="stylesheet" href="markbind/glyphicons/css/bootstrap-glyphicons.min.css">
  <link rel="stylesheet" href="markbind/css/github.min.css">
  <link rel="stylesheet" href="markbind/css/markbind.css">
  <link rel="stylesheet" href="markbind/layouts/default/styles.css">
  <link rel="stylesheet" href="markbind/css/site-nav.css">



</head>

<body>
  <div id="app">
    <header>
      <navbar placement="top" type="inverse">
        <a slot="brand" href="/teammates/index.html" title="Home" class="navbar-brand"><i class="far fa-file-image"></i></a>
        <li><a href="/teammates/index.html" class="nav-link">HOME</a></li>
        <li><a href="/teammates/about.html" class="nav-link">ABOUT</a></li>
        <li slot="right">
          <form class="navbar-form">
            <searchbar :data="searchData" placeholder="Search" :on-hit="searchCallback" menu-align-right></searchbar>
          </form>
        </li>
      </navbar>
    </header>
    <div id="flex-body">
      <nav id="site-nav" class="navbar navbar-light bg-transparent">
        <div class="position-sticky position-top site-nav-spacer viewport-height-90 scrollable slim-scroll">
          <ul class="px-0 site-nav-list">
            <li class="mt-2"><a href="/teammates/index.html" class="site-nav__a">Index</a></li>
            <li class="mt-2"><a href="/teammates/CONTRIBUTING.html" class="site-nav__a">CONTRIBUTING</a></li>
            <li class="mt-2"><a href="/teammates/README.html" class="site-nav__a">README</a></li>
            <li class="mt-2"><a href="/teammates/best-practices/coding.html" class="site-nav__a">Coding</a></li>
            <li class="mt-2"><a href="/teammates/best-practices/data-migration.html" class="site-nav__a">Data Migration</a></li>
            <li class="mt-2"><a href="/teammates/best-practices/testing.html" class="site-nav__a">Testing</a></li>
            <li class="mt-2"><a href="/teammates/best-practices/ui-design.html" class="site-nav__a">Ui Design</a></li>
            <li class="mt-2"><a href="/teammates/captcha.html" class="site-nav__a">Captcha</a></li>
            <li class="mt-2"><a href="/teammates/design.html" class="site-nav__a">Design</a></li>
            <li class="mt-2"><a href="/teammates/development.html" class="site-nav__a">Development</a></li>
            <li class="mt-2"><a href="/teammates/emails.html" class="site-nav__a">Emails</a></li>
            <li class="mt-2"><a href="/teammates/glossary.html" class="site-nav__a">Glossary</a></li>
            <li class="mt-2"><a href="/teammates/ide-setup.html" class="site-nav__a">Ide Setup</a></li>
            <li class="mt-2"><a href="/teammates/issues.html" class="site-nav__a">Issues</a></li>
            <li class="mt-2"><a href="/teammates/overview.html" class="site-nav__a">Overview</a></li>
            <li class="mt-2"><a href="/teammates/performance-testing.html" class="site-nav__a">Performance Testing</a></li>
            <li class="mt-2"><a href="/teammates/process.html" class="site-nav__a">Process</a></li>
            <li class="mt-2"><a href="/teammates/setting-up.html" class="site-nav__a">Setting Up</a></li>
            <li class="mt-2"><a href="/teammates/snapshot-testing.html" class="site-nav__a">Snapshot Testing</a></li>
            <li class="mt-2"><a href="/teammates/static-analysis.html" class="site-nav__a current">Static Analysis</a></li>
            <li class="mt-2"><a href="/teammates/troubleshooting-guide.html" class="site-nav__a">Troubleshooting Guide</a></li>
          </ul>
        </div>
      </nav>
      <div id="content-wrapper">
        <h1 id="static-analysis">Static Analysis<a class="fa fa-anchor" href="#static-analysis"></a></h1>
        <p>TEAMMATES uses a number of static analysis tools in order to maintain code quality.
          This document will cover an overview of these tools and how to run them in local environment.</p>
        <p>IDE integrations will be listed down where available, but no further information e.g. setting up will be provided.</p>
        <ul>
          <li><a href="#version-numbers">Version numbers</a></li>
          <li><a href="#tool-stack">Tool stack</a></li>
          <li><a href="#suppressing-rules">Suppressing rules</a></li>
          <li><a href="#intellij-automatic-setup">IntelliJ automatic setup</a></li>
          <li><a href="#running-static-analysis">Running static analysis</a></li>
        </ul>
        <h2 id="version-numbers">Version numbers<a class="fa fa-anchor" href="#version-numbers"></a></h2>
        <p>The version number of all the tool stacks are declared in <code>build.gradle</code> or <code>package.json</code>.</p>
        <p>When downloading the plugin for Eclipse/IntelliJ, find the plugin version that uses the correct version of the tool, e.g if CheckStyle 8.0 is used find an Eclipse/IntelliJ plugin that uses CheckStyle 8.0 as well.
          If the exact version of the plugin cannot be found, using the latest version is allowed, however there is no guarantee that there will be no backward-incompatible changes.</p>
        <p>Conversely, when updating any tool, try to ensure that the tool version is supported by the Eclipse/IntelliJ plugin, e.g when upgrading CheckStyle to 8.0 try to ensure that there is an Eclipse/IntelliJ plugin which supports that version as well.</p>
        <h2 id="tool-stack">Tool stack<a class="fa fa-anchor" href="#tool-stack"></a></h2>
        <div class="table-responsive">
          <table class="markbind-table table table-bordered table-striped">
            <thead>
              <tr>
                <th>Tool name</th>
                <th>Eclipse integration</th>
                <th>IntelliJ integration</th>
                <th>Ruleset</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><a href="http://checkstyle.sourceforge.net/">CheckStyle</a></td>
                <td><a href="https://marketplace.eclipse.org/content/checkstyle-plug">Checkstyle Plug-in</a></td>
                <td><a href="https://plugins.jetbrains.com/plugin/1065-checkstyle-idea">CheckStyle-IDEA</a></td>
                <td><a href="/teammates/(../static-analysis/teammates-checkstyle.xml)"><code>teammates-checkstyle.xml</code></a></td>
              </tr>
              <tr>
                <td><a href="https://pmd.github.io/">PMD</a></td>
                <td><a href="https://marketplace.eclipse.org/content/eclipse-pmd">eclipse-pmd</a></td>
                <td><a href="https://plugins.jetbrains.com/idea/plugin/1137-pmdplugin">PMDPlugin</a></td>
                <td><a href="static-analysis/teammates-pmd.xml"><code>teammates-pmd.xml</code></a>, <a href="static-analysis/teammates-pmdMain.xml"><code>teammates-pmdMain.xml</code></a></td>
              </tr>
              <tr>
                <td><a href="https://spotbugs.github.io/">SpotBugs</a></td>
                <td><a href="https://marketplace.eclipse.org/content/spotbugs-eclipse-plugin">SpotBugs Eclipse Plugin</a></td>
                <td>-<sup>1</sup></td>
                <td><a href="static-analysis/teammates-spotbugs.xml"><code>teammates-spotbugs.xml</code></a></td>
              </tr>
              <tr>
                <td><a href="https://github.com/TNG/ArchUnit">ArchUnit</a></td>
                <td>-</td>
                <td>-</td>
                <td>-</td>
              </tr>
              <tr>
                <td><a href="https://palantir.github.io/tslint/">TSLint</a></td>
                <td>-</td>
                <td>Built-in<sup>2</sup></td>
                <td><a href="static-analysis/teammates-tslint.yml"><code>teammates-tslint.yml</code></a></td>
              </tr>
              <tr>
                <td><a href="https://github.com/marionebl/jsonlint-cli">JSONlint</a></td>
                <td>-</td>
                <td>-</td>
                <td>-</td>
              </tr>
              <tr>
                <td><a href="http://stylelint.io">stylelint</a></td>
                <td>-</td>
                <td>Built-in<sup>2,3</sup></td>
                <td><a href="static-analysis/teammates-stylelint.yml"><code>teammates-stylelint.yml</code></a></td>
              </tr>
              <tr>
                <td><a href="https://github.com/evanshortiss/lintspaces-cli">lintspaces</a></td>
                <td>-</td>
                <td>-</td>
                <td>-</td>
              </tr>
            </tbody>
          </table>
        </div>
        <p><sup>1</sup> You may be able to use <a href="https://plugins.jetbrains.com/idea/plugin/3847-findbugs-idea">FindBugs-IDEA</a> plugin instead.</p>
        <p><sup>2</sup> Integrations are built-in and can be found under <code>Languages &amp; Frameworks</code> under <code>File → Settings</code> or <code>IntelliJ IDEA → Preferences</code>.</p>
        <p><sup>3</sup> During setup: Copy <code>$PROJECT_DIR$/static-analysis/teammates-stylelint.yml</code> to <code>$PROJECT_DIR$/.stylelintrc.yml</code>.</p>
        <h2 id="suppressing-rules">Suppressing rules<a class="fa fa-anchor" href="#suppressing-rules"></a></h2>
        <p>Not all rules from all static analysis tools need to be followed 100% of the time; there are times where some rules need to be broken for various reasons.
          Most of the static analysis tools we use allow for such leeway through various means.</p>
        <p>General rule of thumb when suppressing rules:</p>
        <ul>
          <li>The suppression should be as specific as possible, e.g. specific rule, specific scope (lines/methods/classes)</li>
          <li>The rule must be re-enabled after the suppression is no longer necessary</li>
          <li>The reason for violating the rule should be explained</li>
        </ul>
        <h2 id="intellij-automatic-setup">IntelliJ automatic setup<a class="fa fa-anchor" href="#intellij-automatic-setup"></a></h2>
        <p>An automated setup for some of the static analysis tools is provided for IntelliJ users.</p>
        <ol>
          <li>
            <p>Ensure the following plugins are installed:</p>
            <ul>
              <li><a href="https://plugins.jetbrains.com/plugin/1065-checkstyle-idea"><code>CheckStyle-IDEA</code></a></li>
              <li><a href="https://plugins.jetbrains.com/plugin/1137-pmdplugin"><code>PMDPlugin</code></a></li>
              <li>(Optional) <a href="https://plugins.jetbrains.com/plugin/6098-nodejs"><code>NodeJS</code></a>: You can this plugin to manage dependencies.</li>
            </ul>
          </li>
          <li>
            <p>Run the command to setup the settings for the various plugins:</p>
            <pre><code class="hljs sh">./gradlew setupIntellijStaticAnalysis
</code></pre>
          </li>
          <li>
            <p>Restart IntelliJ IDEA.</p>
          </li>
        </ol>
        <blockquote>
          <ul>
            <li>Once <code>CheckStyle-IDEA</code> is set-up, the version used will be kept in sync with the build script when <code>Use auto-import</code> is enabled. This is achieved by the Gradle task <code>syncIntelliJCheckStyleVersion</code> which runs after <code>setupIntellijStaticAnalysis</code>.</li>
            <li>For <code>stylelint</code>, the installed packages in <code>node_modules</code> are directly referenced in IntelliJ IDEA.</li>
          </ul>
        </blockquote>
        <h2 id="running-static-analysis">Running static analysis<a class="fa fa-anchor" href="#running-static-analysis"></a></h2>
        <h3 id="cli">CLI<a class="fa fa-anchor" href="#cli"></a></h3>
        <blockquote>
          <p>Note the following:</p>
          <ul>
            <li>Change <code>./gradlew</code> to <code>gradlew.bat</code> in Windows.</li>
            <li>All the commands are assumed to be run from the root project folder, unless otherwise specified.</li>
          </ul>
        </blockquote>
        <div class="table-responsive">
          <table class="markbind-table table table-bordered table-striped">
            <thead>
              <tr>
                <th>Tool name</th>
                <th>Command</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>CheckStyle</td>
                <td><code>./gradlew checkstyleMain</code>, <code>./gradlew checkstyleTest</code></td>
              </tr>
              <tr>
                <td>PMD</td>
                <td><code>./gradlew pmdMain</code>, <code>./gradlew pmdTest</code></td>
              </tr>
              <tr>
                <td>SpotBugs</td>
                <td><code>./gradlew spotbugsMain</code>, <code>./gradlew spotbugsTest</code></td>
              </tr>
              <tr>
                <td>Macker</td>
                <td><code>./gradlew architectureTest</code></td>
              </tr>
              <tr>
                <td>TSLint</td>
                <td><code>npm run lint:ts</code></td>
              </tr>
              <tr>
                <td>JSONlint</td>
                <td><code>npm run lint:json</code></td>
              </tr>
              <tr>
                <td>stylelint</td>
                <td><code>npm run lint:css</code></td>
              </tr>
              <tr>
                <td>lintspaces</td>
                <td><code>npm run lint:spaces</code></td>
              </tr>
            </tbody>
          </table>
        </div>
        <p>To run all static analysis tasks in one sitting, run the following two commands:</p>
        <pre><code class="hljs sh">./gradlew lint --<span class="hljs-built_in">continue</span>
npm run lint
</code></pre>
        <h3 id="ci">CI<a class="fa fa-anchor" href="#ci"></a></h3>
        <p>Travis CI and AppVeyor CI will run static analysis <em>before</em> testing.
          If violations are found, the build will be terminated with an error before any testing is done in order to save time and resources.</p>
      </div>
    </div>
    <footer>
      <div class="text-center">
        This is a dynamic height footer that supports markdown <span>😄</span>!
      </div>

      <div class="text-center">
        <small>[Generated by <a href="https://markbind.org/">MarkBind 2.3.0</a> on Tue, 23 Apr 2019 07:31:51 GMT]</small></div>
    </footer>
  </div>
</body>
<script src="markbind/js/vue.min.js"></script>
<script src="markbind/js/vue-strap.min.js"></script>
<script src="markbind/js/bootstrap-utility.min.js"></script>
<script src="markbind/js/polyfill.min.js"></script>
<script src="markbind/js/bootstrap-vue.min.js"></script>
<script>
  const baseUrl = '/teammates'
  const enableSearch = true
</script>
<script src="markbind/js/setup.js"></script>
<script src="markbind/layouts/default/scripts.js"></script>

</html>