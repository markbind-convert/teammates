<!DOCTYPE html>
<html>

<head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="MarkBind 2.3.0">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title></title>
  <link rel="stylesheet" href="markbind/css/bootstrap.min.css">
  <link rel="stylesheet" href="markbind/css/bootstrap-vue.min.css">
  <link rel="stylesheet" href="markbind/fontawesome/css/all.min.css">
  <link rel="stylesheet" href="markbind/glyphicons/css/bootstrap-glyphicons.min.css">
  <link rel="stylesheet" href="markbind/css/github.min.css">
  <link rel="stylesheet" href="markbind/css/markbind.css">
  <link rel="stylesheet" href="markbind/layouts/default/styles.css">
  <link rel="stylesheet" href="markbind/css/site-nav.css">



</head>

<body>
  <div id="app">
    <header>
      <navbar placement="top" type="inverse">
        <a slot="brand" href="/teammates/index.html" title="Home" class="navbar-brand"><i class="far fa-file-image"></i></a>
        <li><a href="/teammates/index.html" class="nav-link">HOME</a></li>
        <li><a href="/teammates/about.html" class="nav-link">ABOUT</a></li>
        <li slot="right">
          <form class="navbar-form">
            <searchbar :data="searchData" placeholder="Search" :on-hit="searchCallback" menu-align-right></searchbar>
          </form>
        </li>
      </navbar>
    </header>
    <div id="flex-body">
      <nav id="site-nav" class="navbar navbar-light bg-transparent">
        <div class="position-sticky position-top site-nav-spacer viewport-height-90 scrollable slim-scroll">
          <ul class="px-0 site-nav-list">
            <li class="mt-2"><a href="/teammates/index.html" class="site-nav__a">Index</a></li>
            <li class="mt-2"><a href="/teammates/CONTRIBUTING.html" class="site-nav__a">CONTRIBUTING</a></li>
            <li class="mt-2"><a href="/teammates/README.html" class="site-nav__a">README</a></li>
            <li class="mt-2"><a href="/teammates/best-practices/coding.html" class="site-nav__a">Coding</a></li>
            <li class="mt-2"><a href="/teammates/best-practices/data-migration.html" class="site-nav__a">Data Migration</a></li>
            <li class="mt-2"><a href="/teammates/best-practices/testing.html" class="site-nav__a">Testing</a></li>
            <li class="mt-2"><a href="/teammates/best-practices/ui-design.html" class="site-nav__a">Ui Design</a></li>
            <li class="mt-2"><a href="/teammates/captcha.html" class="site-nav__a">Captcha</a></li>
            <li class="mt-2"><a href="/teammates/design.html" class="site-nav__a">Design</a></li>
            <li class="mt-2"><a href="/teammates/development.html" class="site-nav__a">Development</a></li>
            <li class="mt-2"><a href="/teammates/emails.html" class="site-nav__a">Emails</a></li>
            <li class="mt-2"><a href="/teammates/glossary.html" class="site-nav__a">Glossary</a></li>
            <li class="mt-2"><a href="/teammates/ide-setup.html" class="site-nav__a">Ide Setup</a></li>
            <li class="mt-2"><a href="/teammates/issues.html" class="site-nav__a">Issues</a></li>
            <li class="mt-2"><a href="/teammates/overview.html" class="site-nav__a">Overview</a></li>
            <li class="mt-2"><a href="/teammates/performance-testing.html" class="site-nav__a">Performance Testing</a></li>
            <li class="mt-2"><a href="/teammates/process.html" class="site-nav__a current">Process</a></li>
            <li class="mt-2"><a href="/teammates/setting-up.html" class="site-nav__a">Setting Up</a></li>
            <li class="mt-2"><a href="/teammates/snapshot-testing.html" class="site-nav__a">Snapshot Testing</a></li>
            <li class="mt-2"><a href="/teammates/static-analysis.html" class="site-nav__a">Static Analysis</a></li>
            <li class="mt-2"><a href="/teammates/troubleshooting-guide.html" class="site-nav__a">Troubleshooting Guide</a></li>
          </ul>
        </div>
      </nav>
      <div id="content-wrapper">
        <h1 id="development-workflow">Development Workflow<a class="fa fa-anchor" href="#development-workflow"></a></h1>
        <p>This is the project-wide development workflow for TEAMMATES.</p>
        <ul>
          <li><a href="#overview">Overview</a></li>
          <li><a href="#fixing-issues">Fixing issues</a></li>
          <li><a href="#reviewing-a-pr">Reviewing a PR</a></li>
          <li><a href="#merging-a-pr">Merging a PR</a></li>
        </ul>
        <h2 id="overview">Overview<a class="fa fa-anchor" href="#overview"></a></h2>
        <img src="/teammates/images/workflow.png" width="600">
        <ul>
          <li>This workflow is an adaptation of the <a href="https://guides.github.com/introduction/flow/">GitHub flow</a>.</li>
          <li>If you need any help regarding the workflow, please <a href="https://github.com/TEAMMATES/teammates/issues/new">post a new issue in our issue tracker</a>.</li>
          <li>It is assumed that the development environment has been correctly set up. If this step has not been completed, refer to <a href="/teammates/setting-up.md">this document</a>.<br>
            You are also encouraged to be reasonably familiar with how to <a href="/teammates/development.md">work with your own local copy of TEAMMATES</a>.</li>
        </ul>
        <p>The following are the roles involved:</p>
        <ul>
          <li><strong>Dev</strong>: fixing issues</li>
          <li><strong>Reviewer</strong>: reviewing pull requests (PRs); usually a core team member</li>
          <li><strong>Code quality reviewer</strong>: approving PRs; usually the Project Manager</li>
        </ul>
        <blockquote>
          <p><em>Roles</em> are related to the development process and they are different from <em>Positions</em>, which relate to the organization structure of the TEAMMATES developer community.</p>
        </blockquote>
        <h2 id="fixing-issues">Fixing issues<a class="fa fa-anchor" href="#fixing-issues"></a></h2>
        <p><strong>Role: Dev</strong></p>
        <p>This instruction set will use the issue <code>Remove unnecessary System.out.printlns from Java files #3942</code> as an example.</p>
        <h3 id="step-1-pick-an-issue-to-fix">Step 1: Pick an issue to fix<a class="fa fa-anchor" href="#step-1-pick-an-issue-to-fix"></a></h3>
        <p>Our issue tracker contains bug reports, feature requests, as well as suggestions for enhancements.
          You are free to work on any of the issues listed there.</p>
        <ul>
          <li>If you are a contributor, there is no need to get the issue assigned to you.</li>
          <li>If you are a core team member, assign the issue to yourself and assign it a milestone.
            You are expected to open a PR for this issue within a week; inactivity for a longer time may result in the issue being un-assigned so that someone else can work on it.</li>
          <li>While not required, the following gestures are appreciated:
            <ul>
              <li>Indicating your interest in working on any particular issue by commenting on the issue thread itself.</li>
              <li>Refraining from working on issues that are assigned to someone else or have open PRs.</li>
            </ul>
          </li>
          <li>(Optional) You can discuss, via the issue tracker, the alternative solutions before choosing one to implement.
            Such a discussion reduces the chance of a rejected fix or a misunderstood issue.</li>
        </ul>
        <p>The <a href="/teammates/issues.md#issue-labels">issue labels</a> may help you in choosing which issue to fix.</p>
        <h3 id="step-2-start-clean-from-a-new-branch">Step 2: Start clean from a new branch<a class="fa fa-anchor" href="#step-2-start-clean-from-a-new-branch"></a></h3>
        <p>In most cases, you will start the PR from the <code>master</code> branch. There are scenarios where you are required to start from another branch instead:</p>
        <ul>
          <li>You are creating a hot patch: start from the <code>release</code> branch.</li>
          <li>You are working on a <em>long-lived feature branch</em> (a branch which contains multiple commits from possibly multiple authors, used for major feature development/refactoring): start from that branch.</li>
        </ul>
        <p>For brevity, this instruction set will use <code>master</code> branch as the base branch. Any reference to the <code>master</code> branch should be replaced with the base branch that applies to your case.</p>
        <ol>
          <li>
            <p>Start off from your <code>master</code> branch and make sure it is up-to-date with the latest version of the main repo's <code>master</code> branch.</p>
            <pre><code class="hljs sh">git checkout master
git pull
</code></pre>
          </li>
          <li>
            <p>Create a new branch to push your commits into. If you have commit access and need to push into the main repo for some reason, name it <code>{IssueNumber}-{some-keywords}</code>,
              where <code>some-keywords</code> are representative keywords taken from the issue title.</p>
            <pre><code class="hljs sh">git checkout -b 3942-remove-unnecessary-println
</code></pre>
          </li>
        </ol>
        <p>Notes:</p>
        <ol>
          <li><strong>Do not</strong> combine fixes for multiple issues in one branch, unless they are tightly related.</li>
          <li>Your <code>master</code> branch must never be ahead of the main repo's <code>master</code> branch at all times.</li>
        </ol>
        <h3 id="step-3-fix-the-issue">Step 3: Fix the issue<a class="fa fa-anchor" href="#step-3-fix-the-issue"></a></h3>
        <blockquote>
          <p>If this is your first issue, you may want to look at our coding and testing best practices as well as coding conventions (links given <a href="/teammates/README.md">here</a>).</p>
        </blockquote>
        <p>Make the changes to the code, tests, and documentations as needed by the issue.</p>
        <ol>
          <li>
            <p>Commit the changes to your branch.</p>
            <pre><code class="hljs sh">git add -A
git commit
</code></pre>
            <ul>
              <li>You may commit as many times as you wish while you are making the changes.
                It is, however, a good idea to commit at meaningful points to keep your branch reasonably clean.</li>
              <li>Use meaningful commit messages (e.g. <code>Add tests for the truncate method</code>).
                <a href="http://chris.beams.io/posts/git-commit/">Here</a> is a good reference.</li>
              <li>If you introduce changes that are incompatible with the prevailing data storage schema (afterwards &quot;breaking changes&quot;), a <em>data migration</em> is necessary to be done by the core team. If a data migration is necessary to take the issue forward:
                <ul>
                  <li>Make sure that the core team (or at least your reviewer) is aware of this.</li>
                  <li>Follow <a href="https://github.com/TEAMMATES/teammates-ops/blob/master/best-practices.md#data-migration">data migration best practices</a>.</li>
                  <li>Your changes should initially work for both the old and new versions of the data schema. It is fine if an unclean hack is necessary for the new code to work under the <em>old</em> data schema.</li>
                  <li>Mark clearly in the code which parts are tailored specifically for the old data schema, <em>especially if an unclean hack is used</em>.</li>
                  <li>Concurrently or immediately after the breaking changes are merged, you need to create a <a href="/teammates/development.md#running-client-scripts">client script</a> to migrate all data following the old schema to the new schema.</li>
                </ul>
              </li>
            </ul>
          </li>
          <li>
            <p>Sync with the main repo frequently. While you were fixing the issue, others might have pushed new code to the main repo.</p>
            <ul>
              <li>
                <p>Update your repo's <code>master</code> branch with any new changes from main repo, then switch back to your work branch.</p>
                <pre><code class="hljs sh">git checkout master
git pull
git checkout 3942-remove-unnecessary-println
</code></pre>
              </li>
              <li>
                <p>Option 1: merge those updates to the branch you are working on.</p>
                <pre><code class="hljs sh">git merge master
</code></pre>
              </li>
              <li>
                <p>Option 2: if you are confident with rebasing, rebase your changes over the latest <code>master</code> branch.</p>
                <pre><code class="hljs sh">git rebase master
</code></pre>
              </li>
              <li>
                <p>If there are updates to the dependencies on the build configuration, you should update your local copies accordingly.</p>
              </li>
            </ul>
          </li>
          <li>
            <p><a name="things-to-check"></a>Before submitting your work for review, here are some things to check (non-exhaustive):</p>
            <ul>
              <li>
                <p>The code is <strong>properly formatted for readability</strong>.</p>
              </li>
              <li>
                <p>The code base passes <strong>static analysis</strong> (i.e. code quality check):</p>
                <pre><code class="hljs sh">./gradlew lint
npm run lint
</code></pre>
              </li>
              <li>
                <p><strong>All affected tests are passing</strong> on your dev server.<br>
                  You are more than welcome to also ensure <em>dev green</em>, i.e. all tests are passing on your dev server.</p>
              </li>
              <li>
                <p><strong>Staging-tested (if need be)</strong>: If your new code might behave differently on a remote server than how it behaves on the dev server,
                  ensure that the affected tests are passing against the updated app running on your own GAE staging server.</p>
              </li>
              <li>
                <p><strong>No unrelated changes</strong> are introduced in the branch. This includes unnecessary formatting changes.</p>
              </li>
              <li>
                <p>All changes or additions to functional code are <strong>accompanied by changes or additions in tests</strong>, even if they are absent before.</p>
              </li>
              <li>
                <p>All new public APIs (methods, classes) are <strong>documented with header comments</strong>.</p>
              </li>
              <li>
                <p><strong>Documentations are updated</strong> when necessary, particularly when there are changes or additions to software design as well as user-facing features.</p>
              </li>
            </ul>
          </li>
          <li>
            <p>Push your branch to your fork, or to the main repo only if necessary.</p>
            <pre><code class="hljs sh">git push {remote-name} 3942-remove-unnecessary-println
</code></pre>
            <p>If the above command does not work e.g. because of rebasing, do a forced-push:</p>
            <pre><code class="hljs sh">git push -f {remote-name} 3942-remove-unnecessary-println
</code></pre>
            <blockquote>
              <p>Anyone working on an issue, including core team members, should use branches in his/her own fork instead unless the branch needs to be in the main repo.
                Such cases include:</p>
              <ul>
                <li>The branch is being worked on by multiple people.</li>
                <li>The branch contains changes that need to be trialled by other core team member.</li>
              </ul>
            </blockquote>
          </li>
        </ol>
        <h3 id="step-4-submit-a-pr">Step 4: Submit a PR<a class="fa fa-anchor" href="#step-4-submit-a-pr"></a></h3>
        <p><a href="https://help.github.com/articles/creating-a-pull-request/">Create a PR</a> with the following configuration:</p>
        <ul>
          <li>The base branch is the main repo's <code>master</code> branch.</li>
          <li>PR name: copy-and-paste the relevant issue name and include the issue number in front in square brackets,
            e.g. <code>[#3942] Remove unnecessary System.out.printlns from Java files</code>.</li>
          <li>PR description: mention the issue number in this format: <code>Fixes #3942</code>.
            Doing so will <a href="https://github.com/blog/1506-closing-issues-via-pull-requests">automatically close the related issue once the PR is merged</a>.</li>
          <li>Ensure that &quot;Allow edits from maintainers&quot; is ticked.</li>
          <li>You are encouraged to describe the changes you have made in your branch and how they resolve the issue.</li>
        </ul>
        <p>It is not required that you submit a PR only when your work is ready for review;
          make it clear in the PR (e.g. in the description, in a comment, or as an <code>s.*</code> label) whether it is still a work-in-progress or is ready for review.</p>
        <p><strong>Note</strong>: if the PR does not fix an issue completely, observe the following:</p>
        <ul>
          <li>Use an appropriate PR name (at your discretion) instead of copying-and-pasting the relevant issue name.</li>
          <li>Use <code>Part of #3942</code> as the PR description. Do NOT use any of the special keywords.</li>
        </ul>
        <h3 id="step-5-following-up">Step 5: Following up<a class="fa fa-anchor" href="#step-5-following-up"></a></h3>
        <p>Once a PR is opened, try and complete it within 2 weeks, or at least stay actively working on it.
          Inactivity for a long period may necessitate a closure of the PR.</p>
        <p>Labels <code>s.*</code> (status labels) are used to indicate status of PRs.
          Their full descriptions can be viewed under the <a href="https://github.com/TEAMMATES/teammates/labels">labels page</a>.</p>
        <h4 id="code-review">Code review</h4>
        <p>Your code will be reviewed, in this sequence, by:</p>
        <ul>
          <li>Travis CI: by running static analysis.<br>
            If there are problems found, the build will terminate without proceeding to testing.<br>
            Most of the tools will display the cause of the failures in the console;
            if this is not the case, you can run any of the static analysis tools and obtain the reports locally.<br>
            Ensure that the static analysis passes before triggering another build.</li>
          <li>Travis CI: by building and running tests.<br>
            If there are failed tests, the build will be marked as a failure.
            You can consult the CI log to find which tests.<br>
            Ensure that all tests pass before triggering another build.
            <ul>
              <li>The CI log will also contain the command that will enable running the failed tests locally.</li>
            </ul>
          </li>
          <li>Reviewer: a core team member will be assigned to the PR as its reviewer, who will approve your PR (<code>s.FinalReview</code>) or suggest changes (<code>s.Ongoing</code>).
            Feel free to add a comment if:
            <ul>
              <li>a reviewer is not assigned within 24 hours.</li>
              <li>the PR does not get any review within 48 hours of review request.</li>
              <li>you want to clarify or discuss about the suggestions given by your reviewer.</li>
            </ul>
          </li>
          <li>Code quality reviewer: final review for maintainability and style.</li>
        </ul>
        <h4 id="updating-the-pr">Updating the PR</h4>
        <p>If you are tasked to update your PR either by Travis CI or by your reviewer, <strong>do not</strong> close the PR and open a new one.
          You should make and push the updates to the same branch used in the PR, essentially repeating <a href="#step-3-fix-the-issue">step 3</a>.</p>
        <p>Remember to add a comment to indicate the PR is ready for review again, e.g. <code>Ready for review</code> or <code>Changes made</code>.
          If you have permission to change labels, you may additionally change the <code>s.*</code> PR label as appropriate.</p>
        <p>The cycle of &quot;code review&quot; - &quot;updating the PR&quot; will be repeated until your PR is approved by all the parties involved (<code>s.ToMerge</code>).</p>
        <h3 id="step-6-prepare-for-merging">Step 6: Prepare for merging<a class="fa fa-anchor" href="#step-6-prepare-for-merging"></a></h3>
        <p>The core team member responsible for merging your PR might contact you for reasons such as resolving merge conflicts.
          Depending on the situation, this may necessitate more changes to be made in your PR (e.g. if your PR is functionally conflicting with a recent change), however this rarely happens.</p>
        <p>Your work on the issue is done when your PR is successfully merged to the main repo's <code>master</code> branch.</p>
        <h2 id="reviewing-a-pr">Reviewing a PR<a class="fa fa-anchor" href="#reviewing-a-pr"></a></h2>
        <p><strong>Role: Reviewer</strong></p>
        <blockquote>
          <ul>
            <li>The reviewer of a PR is the assignee of it.</li>
            <li>To remove whitespace-only changes from being shown, append <code>?w=1</code> to url of the <code>/files</code> page of the PR (the &quot;Files changed&quot; tab).</li>
          </ul>
        </blockquote>
        <p><a href="https://github.com/blog/2256-a-whole-new-github-universe-announcing-new-tools-forums-and-features#code-better-with-reviews">GitHub's review feature</a> is to be used in this task.</p>
        <ul>
          <li>Ensure that the Travis CI build is successful and the developer has local dev green.</li>
          <li>Ensure the following:
            <ul>
              <li>Naming conventions for PR and branch are followed, and <code>Fixes #....</code> or similar keyword is present in the PR description.</li>
              <li>The items in <a href="#things-to-check">this list</a> are all satisfied.</li>
              <li>The solution is the best possible solution to the problem under the circumstances.</li>
              <li>The code is up-to-date with the latest <code>master</code> branch (or whichever base branch applies), or at least no conflict.
                If this is not the case, ask the dev to sync it.</li>
            </ul>
          </li>
          <li>If any of the above are not OK:
            <ul>
              <li>Add comments in the diff to suggest changes.
                Bundle the review comments with the &quot;Start a review&quot; and &quot;Add review comment&quot; features, and finish it with &quot;Request changes&quot;, preferably with the review summary.</li>
              <li>Change the status of the PR to <code>s.Ongoing</code>.</li>
            </ul>
          </li>
          <li>If the code is OK in all aspects, change the PR status to <code>s.FinalReview</code> and &quot;Approve&quot; the PR.</li>
        </ul>
        <p><strong>Role: Code quality reviewer</strong></p>
        <ul>
          <li>Review the code for maintainability and style.</li>
          <li>The follow-up action is the same as that of reviewers, with the only difference being the label to be applied is <code>s.ToMerge</code>.</li>
        </ul>
        <h2 id="merging-a-pr">Merging a PR<a class="fa fa-anchor" href="#merging-a-pr"></a></h2>
        <p><strong>Role: dev (with push permission), or reviewer</strong></p>
        <p>This instruction set will use the issue <code>Remove unnecessary System.out.printlns from Java files #3942</code>, resolved by PR <code>#3944</code>, with <code>master</code> branch as the base branch, as an example.</p>
        <ul>
          <li>
            <p>Merging can be done anytime as long as the <code>s.ToMerge</code> label is present and GitHub gives a green light for merging.
              There are a few scenarios where GitHub can prevent merging from proceeding:</p>
            <ul>
              <li><strong>Merge conflict</strong>: the PR is conflicting with the current <code>master</code> branch; the author will need to resolve the conflicts before proceeding.</li>
              <li><strong>Outdated branch</strong>: the PR is not in sync with the current <code>master</code> branch. If the PR allows edits from maintainers, simply update the branch using the &quot;Update branch&quot; option; otherwise, the author will need to sync it themselves before proceeding.</li>
            </ul>
            <p>It is up to the dev/reviewer's discretion on whether the merge conflict or outdated branch necessitates another review.<br>
              In general, unless the changeset is functionally conflicting, there is no need for another review.</p>
          </li>
          <li>
            <p>When ready for merging,</p>
            <ul>
              <li>
                <p>Merge with <a href="https://help.github.com/articles/about-pull-request-merges/#squash-and-merge-your-pull-request-commits">&quot;Squash and merge&quot;</a> option. Format of the commit message:</p>
                <pre><code class="hljs">[#Issue number] Issue title as given in the original issue (#PR number)
</code></pre>
                <p>e.g. <code>[#3942] Remove unnecessary System.out.printlns from Java files (#3944)</code>.</p>
              </li>
              <li>
                <p>Where appropriate (e.g. merging a long-lived feature branch), the <a href="https://help.github.com/articles/about-pull-request-merges/#rebase-and-merge-your-pull-request-commits">&quot;Rebase and merge&quot;</a> option can be used instead.</p>
              </li>
              <li>
                <p>Apply a <code>c.*</code> label to the PR to indicate the type of the PR, if it has not been done before.</p>
              </li>
            </ul>
          </li>
          <li>
            <p>If the PR necessitates a data migration, <a href="https://github.com/TEAMMATES/teammates/issues/new?template=data-migration.md">create a data migration issue</a> after merging.</p>
          </li>
        </ul>
      </div>
    </div>
    <footer>
      <div class="text-center">
        This is a dynamic height footer that supports markdown <span>ðŸ˜„</span>!
      </div>

      <div class="text-center">
        <small>[Generated by <a href="https://markbind.org/">MarkBind 2.3.0</a> on Tue, 23 Apr 2019 07:31:51 GMT]</small></div>
    </footer>
  </div>
</body>
<script src="markbind/js/vue.min.js"></script>
<script src="markbind/js/vue-strap.min.js"></script>
<script src="markbind/js/bootstrap-utility.min.js"></script>
<script src="markbind/js/polyfill.min.js"></script>
<script src="markbind/js/bootstrap-vue.min.js"></script>
<script>
  const baseUrl = '/teammates'
  const enableSearch = true
</script>
<script src="markbind/js/setup.js"></script>
<script src="markbind/layouts/default/scripts.js"></script>

</html>